% vim: ts=2:sw=2:tw=80:et
\thispagestyle{fancy}
\pagestyle{fancy}

\section{Prerequisites\index{Installing prerequisites}}

This project depends on several other python-related projects and these must
first be installed.

\subsection{Dependencies}
Arbwave is dependent on various packages, both generally available and also
several that are distributed with the arbwave project repository.  This list
enumerates the various specific packages that Arbwave depends on.  Those
distributed as a part of the Arbwave project repository are marked below.

\begin{itemize}
  \item Python packages/libraries:
    \begin{itemize}
      \item \textbf{python (2.7)} \\
        Python version 3.X will not currently work.
      \item \textbf{pygi} \\
        \textbf{pygi} is the base package of the GObject instropsection library
        interface.  This library provides dynamic access to various other
        libraries, including the Gtk runtime.  In addition to installing
        \textbf{pygi}, one must also have these installed (often already installed
        on Gnome-based Linux systems):
        \begin{itemize}
          \item Gtk $> 3.10$
          \item Pango $> 3.10$
        \end{itemize}

      \item \textbf{matplotlib} \\
        This package also provides mpl\_toolkits import.
      \item \textbf{numpy} \\
        Generally, this is included as part of scipy and required for matplotlib.
      \item \textbf{scipy} \\
        scipy.interpolate imports are required for channel scaling/calibration.
      \item A graph library for graph-analysis of connections between hardware
        components.\\
        You must have either of these installed:
        \begin{itemize}
          \item \textbf{python-igraph} (\underline{Significantly} faster)
          \item \textbf{networkx} (Apparently more available)
        \end{itemize}

      \item \textbf{Pyro}; version 3, not 4

      \item \textbf{pylibnidaqmx}
        \begin{itemize}
          \item must have modifications by S. Olson
          \item Python wrapper library (wraps NI DAQmx nicaiu.dll c library)
            provides actual linkage to the NIDAQmx drivers
          \item Only needed if NIDAQmx relevant hardware is going to be used
        \end{itemize}

      \item \textbf{physical}
        \begin{itemize}
          \item http://github.com/olsonse/physical
          \item dimensional analysis
          \item units and constants library (c++, python, octave, gnuplot)
        \end{itemize}

      \item \textbf{viewpoint}
        \begin{itemize}
          \item python wrapper library (wraps Viewpoint dio64\_32.dll c library)
          \item only required if using ViewpointUSA dio64 hardware
        \end{itemize}

      \item \textbf{marvin}
        \begin{itemize}
          \item python wrapper library around MarvinTest c-libraries
          \item only required if using MarvinTest FPGA or analog output hardware
        \end{itemize}

      \item \textbf{billiard}
        \begin{itemize}
          \item must have modifications by S. Olson
          \item Not required for Windows platforms
          \item backport of python3 multiprocessing library
        \end{itemize}
    \end{itemize}

  \item C libraries:
    \begin{itemize}
    \item \textbf{NI DAQmx (nicaiu.dll)} \\
      Only needed if NIDAQmx relevant hardware is going to be used.
    \item \textbf{Viewpoint DIO64 (dio64\_32.dll)} \\
      Only needed if Viewpoint's DIO64 digital output/input board will be used.
    \item \textbf{Marvin GxFpga (libGxFpga.so, or GxFpga.dll)}
      Only needed if MarvinTest GxFpga with \acro{AFRL} Timing-Generator
      firmware is used.
    \item \textbf{Marvin GxAo (libGxAo.so, or GxAo.dll)}
      Only needed if MarvinTest GxAo analog output hardware is used.
    \end{itemize}
\end{itemize}

\section{Installation\index{Installing Arbwave}}
Since Arbwave is a set of Python scripts and other related code that has certain 
dependencies and requirements,
it is not feasible to write a strict set of instructions for ``installing'' Arbwave,
but the following is a set of guidelines that might be used to make Arbwave operational.

\subsection{Windows Platforms}

Note that you may need to specify a web proxy;\\
the commands to get conda to use a web proxy, in some cases, is:
\begin{verbatim}
set http_proxy=http://proxy.server:port
set https_proxy=http://proxy.server:port
\end{verbatim}


The following are a set of steps used to make Arbwave functional on a Windows system:
\begin{enumerate}
  \item Install Anaconda python (2.7)
  \item install \verb|pygi-aio-3.x.x_ref<N>-setup.exe| \\
    This is available from pygnome project.
    During the installation process, choose at least the following:
    \begin{itemize}
      \item GNOME libraries:
        \begin{itemize}
          \item Base packages
          \item GTK+ 3.x.x
          \item Pango 1.x.x
        \end{itemize}
      \item non-GNOME libraries:
        \begin{itemize}
          \item none
        \end{itemize}
      \item development packages:
        \begin{itemize}
          \item none
        \end{itemize}
    \end{itemize}

  \item Install Pyro (v3) \\
    Anaconda may be able to assist in installing the appropriate version of pyro.
      Searching, for example, \verb|anaconda search -t conda pyro| yielded a source such
    that pyro installation was performed by:
    \begin{verbatim}
      conda install -c david_baddeley pyro
    \end{verbatim}

  \item Install graph library [you can skip this step] \\
    It seems that \textbf{networkx} is already installed by default with
    anaconda and a clean install of \textbf{python-igraph}
    was not trivial.  However, note that taking the time to install 
    \textbf{python-igraph} will result in significant performance improvement.

  \item Do either of these:
    \begin{enumerate}
      \item  (start cmd.exe)
        \begin{enumerate}
          \item cd path/to/arbwave-project
          \item Execute 'python project-shell'
          \item cd arbwave/
          \item 'python run.py [options]'\\
            use \verb|--help| to see options
        \end{enumerate}
      \item
        \begin{enumerate}
          \item Put all the other packages in your PYTHONPATH somehow
          \item cd path/to/arbwave-project/arbwave/
          \item 'python run.py [options]'\\
            use \verb|--help| to see options
        \end{enumerate}
    \end{enumerate}
\end{enumerate}



\subsection{Ubuntu}
Ubuntu makes this very easy.  To install most of the non-project components, one
simply does:

\begin{verbatim}
apt-get install \
  python-matplotlib python-scipy python-igraph pyro \
  py-gi libgtk-3-dev libpango1.0-dev
\end{verbatim}


Then, very similar to the last part of the Windows guidelines: \\
Do either of:
\begin{enumerate}
  \item
    \begin{enumerate}
      \item cd path/to/arbwave-project
      \item Execute project-shell
      \item cd arbwave/
      \item ./run.py [options]\\
        use \verb|--help| to see options
    \end{enumerate}
  \item
    \begin{enumerate}
      \item Put all the other packages in your PYTHONPATH somehow
      \item cd path/to/arbwave-project/arbwave/
      \item ./run.py [options]\\
        use \verb|--help| to see options
    \end{enumerate}
\end{enumerate}
